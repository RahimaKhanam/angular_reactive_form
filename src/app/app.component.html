<!-- Basic Navbar -->
<nav class="navbar bg-primary">
  <div class="container">
    <a class="navbar-brand">
      <img src="../assets/fill-in-form.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
      <span class="text-white mx-3" style="font-size: 1.5rem;">Angular Reactive Form</span>
    </a>
  </div>
</nav>

<!-- Form Container -->
<div class="container">
  <div *ngIf="addUserFlag" class="mt-3 text-center">
    <button class="btn btn-success" (click)="addUser()">Add User</button>
  </div>
  <!-- Form -->
  <form class="form mt-4" [formGroup]="userForm" autocomplete="false" novalidate>
    <div class="row">
      <div class="form-group col-md-4 mb-4">
        <label class="label">First Name</label>
        <input type="text" formControlName="firstName" class="form-control"
          [ngClass]="{'is-invalid': submitFlag && formValues['firstName'].errors}">
        <div *ngIf="submitFlag && formValues['firstName'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['firstName'].errors['required']">First Name is
            required
          </div>
        </div>
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Last Name</label>
        <input type="text" formControlName="lastName" class="form-control"
          [ngClass]="{'is-invalid': submitFlag && formValues['lastName'].errors}">
        <div *ngIf="submitFlag && formValues['lastName'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['lastName'].errors['required']">Last Name is
            required
          </div>
        </div>
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Email</label>
        <input type="email" [email]="true" formControlName="email" class="form-control"
          [ngClass]="{'is-invalid': submitFlag && formValues['email'].errors}">
        <div *ngIf="submitFlag && formValues['email'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['email'].errors['required']">Email is required
          </div>
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['email'].errors['email']">Enter a valid email
          </div>
        </div>
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Phone</label>
        <input type="number" formControlName="phone" minlength="10" class="form-control"
          [ngClass]="{'is-invalid': submitFlag && formValues['phone'].errors}">
        <div *ngIf="submitFlag && formValues['phone'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['phone'].errors['required']">Phone is required
          </div>
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['phone'].errors['pattern']">Phone is invalid
          </div>
        </div>
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Company</label>
        <input type="text" formControlName="company" class="form-control"
          [ngClass]="{'is-invalid': submitFlag && formValues['company'].errors}">
        <div *ngIf="submitFlag && formValues['company'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['company'].errors['required']">Company is
            required
          </div>
        </div>
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Gender</label>
        <div class="form-check">
          <input class="form-check-input" id="male" type="radio" value="male" name="gender" formControlName="gender">
          <label class="form-check-label" for="male">Male</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" id="female" type="radio" value="female" name="gender" formControlName="gender">
          <label class="form-check-label" for="female">Female</label>
        </div>
        <div *ngIf="submitFlag && formValues['gender'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['gender'].errors['required']">Gender is required
          </div>
        </div>

      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">DOB</label>
        <input type="date" formControlName="dob" [ngClass]="{'is-invalid': submitFlag && formValues['dob'].errors}" class="form-control">
        <div *ngIf="submitFlag && formValues['dob'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['dob'].errors['required']">DOB is required</div>
        </div>
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Password</label>
        <input type="password" (blur)="changeVal2($event.target)" formControlName="password"
          [ngClass]="{'is-invalid': submitFlag && formValues['password'].errors}" autocomplete="new-password" class="form-control">
        <div *ngIf="submitFlag && formValues['password'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['password'].errors['required']">Password is
            required
          </div>
        </div>
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Confirm Fassword</label>
        <input type="password" (input)="changeVal1($event.target)" formControlName="confirmPassword"
          [ngClass]="{'is-invalid': submitFlag && formValues['confirmPassword'].errors}" class="form-control">
        <div *ngIf="submitFlag && formValues['confirmPassword'].errors">
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['confirmPassword'].errors['required']">Confirm
            Password
            is required</div>
          <div class="invalid-feedback" *ngIf="submitFlag && formValues['confirmPassword'].errors['mismatch']">Password
            and
            Confirm password are not matched</div>
        </div>
      </div>
    </div>
    <div class="text-center">
      <button class="btn btn-primary" type="submit" (click)="submitForm()">{{addUserFlag ? 'Register' : 'Update'}}</button> &nbsp;&nbsp;&nbsp;
      <button class="btn btn-danger" type="button" (click)="cancelForm()">Cancel</button>
    </div>
  </form>


  <!-- Table -->
  <div *ngIf="registeredUsers.length > 0">
    <table class="table mt-5">
      <tr>
        <th>First name</th>
        <th>Last name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Company</th>
        <th>DOB</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
      <tr *ngFor="let user of registeredUsers; let i=index;">
        <td>{{ user.firstName }}</td>
        <td>{{ user.lastName }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.phone }}</td>
        <td>{{ user.company }}</td>
        <td>{{ user.dob }}</td>
        <td class="icon-div">
          <button (click)="editUser(user)"><img src="../assets/edit.png" alt="Edit Record" class="icon"></button>
        </td>
        <td class="icon-div">
          <button (click)="deleteUser(user)"><img src="../assets/delete.png" alt="Delete Record" class="icon"></button>
        </td>
      </tr>
    </table>
  </div>

</div>