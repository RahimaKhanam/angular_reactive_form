<!-- Basic Navbar -->
<nav class="navbar bg-primary">
  <div class="container">
    <a class="navbar-brand">
      <img src="../assets/fill-in-form.png" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
      <span class="text-white mx-3" style="font-size: 1.5rem;">Angular Reactive Form</span>
    </a>
  </div>
</nav>

<!-- Form Container -->
<div class="container">
  <div *ngIf="addUserFlag" class="mt-3 text-center">
    <button class="btn btn-success" (click)="addUser()">Add User</button>
  </div>
  <!-- Form -->
  <form class="form mt-4" [formGroup]="userForm" autocomplete="false" novalidate>
    <div class="row">
      <div class="form-group col-md-4 mb-4">
        <label class="label">First Name</label>
        <input type="text" formControlName="firstName" class="form-control"
          [ngClass]="{'is-invalid': formValues['firstName'].touched && formValues['firstName'].errors}" placeholder="Enter First Name">
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Last Name</label>
        <input type="text" formControlName="lastName" class="form-control"
          [ngClass]="{'is-invalid': formValues['lastName'].touched && formValues['lastName'].errors}" placeholder="Enter Last Name">
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Email</label>
        <input type="email" formControlName="email" class="form-control"
          [ngClass]="{'is-invalid': formValues['email'].touched && formValues['email'].errors}" placeholder="Enter Email">
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Phone</label>
        <input type="number" formControlName="phone" minlength="10" class="form-control"
          [ngClass]="{'is-invalid': formValues['phone'].touched && formValues['phone'].errors}" placeholder="Enter Phone Number">
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Company</label>
        <input type="text" formControlName="company" class="form-control"
          [ngClass]="{'is-invalid': formValues['company'].touched && formValues['company'].errors}" placeholder="Enter Campany Name">
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Gender</label>
        <div class="form-check">
          <input class="form-check-input" id="male" type="radio" value="male" name="gender" formControlName="gender"
            [ngClass]="{'is-invalid': formValues['gender'].touched && formValues['gender'].errors}">
          <label class="form-check-label" for="male">Male</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" id="female" type="radio" value="female" name="gender" formControlName="gender"
            [ngClass]="{'is-invalid': formValues['gender'].touched && formValues['gender'].errors}">
          <label class="form-check-label" for="female">Female</label>
        </div>
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">DOB</label>
        <input type="date" formControlName="dob" [ngClass]="{'is-invalid': formValues['dob'].touched && formValues['dob'].errors}"
          class="form-control">
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Password</label>
        <input type="password" formControlName="password"
          [ngClass]="{'is-invalid': formValues['password'].touched && formValues['password'].errors}" autocomplete="new-password"
          class="form-control" placeholder="Enter Password">
      </div>
      <div class="form-group col-md-4 mb-4">
        <label class="label">Confirm Fassword</label>
        <input type="password" formControlName="confirmPassword"
          [ngClass]="{'is-invalid': formValues['confirmPassword'].touched && (formValues['confirmPassword'].errors || userForm.errors?.['mismatch'])}"
          class="form-control" placeholder="Confirm Password">
      </div>
    </div>
    <div class="text-center">
      <button class="btn btn-primary" type="submit" (click)="submitForm()" [disabled]="!userForm.valid">
        {{addUserFlag ? 'Save' : 'Update'}}</button> &nbsp;&nbsp;&nbsp;
      <button class="btn btn-danger" type="button" (click)="cancelForm()">Cancel</button>
    </div>
  </form>
  <!-- Table -->
  <div *ngIf="enrolledUsers.length > 0">
    <table class="table mt-5">
      <tr>
        <th>S. No.</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Company</th>
        <th>DOB</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
      <tr *ngFor="let data of enrolledUsers; let i=index;">
        <td>{{i+1}}</td>
        <td>{{ data.firstName }}</td>
        <td>{{ data.lastName }}</td>
        <td>{{ data.email }}</td>
        <td>{{ data.phone }}</td>
        <td>{{ data.company }}</td>
        <td>{{ data.dob }}</td>
        <td class="icon-div">
          <button (click)="editUser(data)"><img src="../assets/edit.png" alt="Edit Record" class="icon"></button>
        </td>
        <td class="icon-div">
          <button (click)="deleteUser(data)"><img src="../assets/delete.png" alt="Delete Record" class="icon"></button>
        </td>
      </tr>
    </table>
  </div>

</div>